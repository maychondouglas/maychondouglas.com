<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <link type="text/script" href="/script.js"> 
    <title>Calculadora de Ipv4</title>
</head> 
<body>
        <nav>
            <!--Menu-->
            <ul class="menu"> 
                <li>Início</li>
                <li>Ipv4 com Classe</li>
                <li>Ipv4 sem Classe</li>
            </ul>
        </nav>
    
        <main>
           
            <h2 class="doFormulario">IPV4 <span id="tituloDaPagina">COM CLASSE</span></h2>
            <p class="doFormulario">Para calcular uma rede Ipv4 com Classe precisamos saber do Ipv4, favor digite o Endereço de Ipv4 abaixo:</p>
            <form class="doFormulario formulario">
                <input id="campoip" type="text" placeholder="ex.: 126.10.10.10">
                <input type="text" placeholder="ex.: /8 ou 255.0.0.0">
                <a id="calcular" class="btn btn-calcular">Calcular</a>
                <span id="mensagem-erro"></span>
            </form>
            <hr>
            <h3  class="doFormulario">Informações da Rede</h3>
           
            <h5 class="doFormulario">Ipv4 digitado: <span id="ipdigitado">126.10.10.10</span></h5>
            <h5 class="doFormulario">Classe: <span id="ipclasse">A</span></h5>
            <h5 class="doFormulario">Mascara Notacao Decimal: <span id="ipmaskdec">255.0.0.0</span> Mascara Notacao CIDR: <span id="ipmaskcidr">/8</span></h5>
            <h5 class="doFormulario">Número de Hosts do Bloco: <span id="ipnumhosts">16777214</span></h5>
            <h5 class="doFormulario">IP de Rede: <span id="iprede">126.0.0.0</span> IP de Broadcast: <span id="ipbroadcast">126.255.255.255</span></h5>
            <h5 class="doFormulario">Primeiro IP Últilizável do Bloco: <span id="ipprimeiro">126.0.0.1</span> Último IP Últilizável do Bloco: <span id="ipultimo">126.255.255.254</span></h5>
        </main>
</body>
<script>
    var campoIP = document.getElementById('campoip');

    var mainPrincipal = document.querySelector('main');
    var inicioPrincipal = document.querySelector('inicio');

    var campoMascara = document.querySelector('form input:nth-child(2)');
    var tituloPagina = document.getElementById('tituloDaPagina');
    var inicio = document.querySelector('nav .menu li:nth-child(1)');
    var ipv4ComClasse = document.querySelector('nav .menu li:nth-child(2)');
    var ipv4SemClasse = document.querySelector('nav .menu li:nth-child(3)');

    var mensagemDeErro = document.getElementById('mensagem-erro');

    /*Elementos de Resultado (spans)*/
    var classeCampo = document.getElementById('ipclasse');
    
    var maskDecimal = document.getElementById('ipmaskdec');
    var maskCIDR = document.getElementById('ipmaskcidr');
    var ipNumHosts = document.getElementById('ipnumhosts');
    var ipDeRede = document.getElementById('iprede');
    var ipDeBroadcast = document.getElementById('ipbroadcast');
    var primeiroIp = document.getElementById('ipprimeiro');
    var ultimoIp = document.getElementById('ipultimo');


    
    ipv4ComClasse.addEventListener('click', function(){
        document.querySelector('main').style.display = "block";
        tituloPagina.innerHTML = 'COM CLASSE';
        
        campoMascara.style.display = "none";
        ipv4ComClasse.style.backgroundColor = "rgba(255, 255, 255, 40%)";
        ipv4ComClasse.style.color = "blue";
        ipv4ComClasse.style.borderRight = "0.2rem solid blue";

        inicio.style.borderStyle = "hidden";
        inicio.style.backgroundColor = "transparent";
        inicio.style.color = "black";

        ipv4SemClasse.style.borderStyle = "hidden";
        ipv4SemClasse.style.backgroundColor = "transparent";
        ipv4SemClasse.style.color = "black";
    });
    
    inicio.addEventListener('click', function(){
        tituloPagina.innerHTML = 'CALCULADORA';
        document.querySelector('main').style.display = "none";
         

        campoMascara.style.display = "none";
        inicio.style.backgroundColor = "rgba(255, 255, 255, 40%)";
        inicio.style.color = "blue";
        inicio.style.borderRight = "0.2rem solid blue";

        ipv4ComClasse.style.borderStyle = "hidden";
        ipv4ComClasse.style.backgroundColor = "transparent";
        ipv4ComClasse.style.color = "black";

        ipv4SemClasse.style.borderStyle = "hidden";
        ipv4SemClasse.style.backgroundColor = "transparent";
        ipv4SemClasse.style.color = "black";
    });
    
    ipv4SemClasse.addEventListener('click', function(){
        document.querySelector('main').style.display = "block";
        
        tituloPagina.innerHTML = 'SEM CLASSE';
        campoMascara.style.display = "flex";
        ipv4SemClasse.style.backgroundColor = "rgba(255, 255, 255, 40%)";
        ipv4SemClasse.style.color = "blue";
        ipv4SemClasse.style.borderRight = "0.2rem solid blue";

        ipv4ComClasse.style.borderStyle = "hidden";
        ipv4ComClasse.style.backgroundColor = "transparent";
        ipv4ComClasse.style.color = "black";

        inicio.style.borderStyle = "hidden";
        inicio.style.backgroundColor = "transparent";
        inicio.style.color = "black";
    });

    var botaoCalcular = document.getElementById('calcular');
    botaoCalcular.addEventListener('click', function(){
        var vetor = campoIP.value.split(".");
        if(vetor.length != 4 || vetor[0] > 255 || vetor[1] > 255 || vetor[2] > 255 || vetor[3] > 255 || vetor[0] <=0 || vetor[1] < 0 || vetor[2] < 0 || vetor[3] < 0 ){
            mensagemDeErro.innerHTML = "O Endereço IP digitado é inválido! Digite um Ip Válido";

        }else{
            mensagemDeErro.innerHTML = "";
            var x = vetor[0];
            var y = vetor[1];
            var z = vetor[2];
            var classe = "";
            var mascaraDecimal = "";
            var mascaraCIDR = 0;
            var numeroDeHosts = 0;
            var enderecoRede = [x, y, z, 0];
            var enderecoBroadcast = [x, y, z, 255];
            var primeiroEnderecoUtilizavel = [x, 0, 0, 1];
            var ultimoEnderecoUtilizavel =[x, 255, 255, 254];
            
            if(vetor[0]<=127){
                classe = "A";
                mascaraDecimal = "255.0.0.0";
                mascaraCIDR = 8;
                var teste = (32-mascaraCIDR);
                numeroDeHosts = Math.pow(2, teste) - 2;
                enderecoRede[1] = 0;
                enderecoRede[2] = 0;
                enderecoRede[3] = 0;
                enderecoBroadcast[1] = 255;
                enderecoBroadcast[2] = 255;
                enderecoBroadcast[3] = 255;
            }else{
                if(vetor[0]<=191){
                    classe = "B";
                    mascaraDecimal = "255.255.0.0";
                    mascaraCIDR = 16;
                    var teste = (32-mascaraCIDR);
                    numeroDeHosts = Math.pow(2, teste) - 2;
                    enderecoRede[2] = 0;
                    enderecoRede[3] = 0;
                    enderecoBroadcast[2] = 255;
                    enderecoBroadcast[3] = 255;
                    primeiroEnderecoUtilizavel[1] = y;
                    ultimoEnderecoUtilizavel[1] = y;
                }else{
                    if(vetor[0]<=223){
                    classe = "C";
                    mascaraDecimal = "255.255.255.0";
                    mascaraCIDR = 24;
                    var teste = (32-mascaraCIDR);
                    numeroDeHosts = Math.pow(2, teste) - 2;
                    primeiroEnderecoUtilizavel[1] = y;
                    primeiroEnderecoUtilizavel[2] = z;
                    ultimoEnderecoUtilizavel[1] = y;
                    ultimoEnderecoUtilizavel[2] = z;
                    }else{
                        if(vetor[0]<=239){
                            classe = "D";
                        }else{
                            classe = "E";
                        }
                    }
                }
            }
        classeCampo.innerHTML = classe;
        maskDecimal.innerHTML = mascaraDecimal;
        maskCIDR.innerHTML = mascaraCIDR;
        ipNumHosts.innerHTML = numeroDeHosts;
        ipDeRede.innerHTML = enderecoRede[0] + '.' + enderecoRede[1] + '.' + enderecoRede[2] + '.' + enderecoRede[3];
        ipDeBroadcast.innerHTML = enderecoBroadcast[0] + '.' + enderecoBroadcast[1] + '.' + enderecoBroadcast[2] + '.' + enderecoBroadcast[3];
        primeiroIp.innerHTML = primeiroEnderecoUtilizavel[0] + '.' + primeiroEnderecoUtilizavel[1] + '.' + primeiroEnderecoUtilizavel[2] + '.' + primeiroEnderecoUtilizavel[3];
        ultimoIp.innerHTML =  ultimoEnderecoUtilizavel[0] + '.' + ultimoEnderecoUtilizavel[1] + '.' + ultimoEnderecoUtilizavel[2] + '.' + ultimoEnderecoUtilizavel[3];
        }

    });
    
    


</script>
</html>